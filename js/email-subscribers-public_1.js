!function(e){"use strict";function s(s,r){r=r||!1;var i={};(i=function(e,s){var r=[],i=!1;return jQuery.each(e.serializeArray()||{},(function(e,n){"esfpx_lists[]"===n.name?(r.push(n.value),i=!0):s[n.name]=n.value})),i&&(s["esfpx_lists[]"]=r),s}(s,i)).es="subscribe",i.action="es_add_subscriber";var n=es_data.es_ajax_url;return jQuery(s).find("#spinner-image").show(),e.ajax({type:"POST",url:n,data:i,dataType:"json",success:function(i){r||(i&&void 0!==i.status&&"SUCCESS"===i.status?(jQuery(s).slideUp("slow"),jQuery(s).hide()):jQuery(s).find("#spinner-image").hide()),jQuery(window).trigger("es.send_response",[jQuery(s),i]),function(s,r){var i="success";"ERROR"===s.status&&(i="error");var n=s.message_text,a=e(r).next(".es_subscription_message");a.attr("class","es_subscription_message "+i),a.html(n);var t={detail:{es_response:i,msg:n},bubbles:!0,cancelable:!0};jQuery(r).trigger("es_response",[t])}(i,s)},error:function(e){jQuery(s).find("#spinner-image").hide(),console.log(e,"error")}}),!1}jQuery(window).on("init.icegram",(function(r,i){void 0!==i&&void 0!==i.messages&&jQuery('.icegram .es_shortcode_form, .icegram form[data-source="ig-es"]').each((function(r,i){jQuery(i).bind("submit",(function(r){r.preventDefault(),s(e(this),!0)}))}))}))}(jQuery);